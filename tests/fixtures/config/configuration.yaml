
# Test configuration for fluid-level-background-card E2E tests
homeassistant:
  name: Test Home
  unit_system: metric
  time_zone: UTC
  external_url: http://localhost:8123

# Disable authentication for testing
# This allows the E2E tests to access HA without login
http:
  use_x_forwarded_for: true
  trusted_proxies:
    - 127.0.0.1
    - ::1
  ip_ban_enabled: false
  login_attempts_threshold: -1

# Disable onboarding for automated testing
default_config:

# Skip onboarding by creating a minimal user config
# This is required to bypass the initial setup wizard
auth:
  providers:
    - type: trusted_networks
      trusted_networks:
        - 127.0.0.1
        - ::1
      allow_bypass_login: true

# Enable the frontend
frontend:

# Enable Lovelace
lovelace:
  mode: yaml
  resources:
    - url: /community/fluid-level-background-card/fluid-level-background-card.js
      type: module

# Test entities for the card
input_number:
  test_level:
    name: Test Level
    min: 0
    max: 100
    step: 1
    initial: 50
    unit_of_measurement: "%"
    icon: mdi:water-percent

  test_battery:
    name: Test Battery
    min: 0
    max: 100
    step: 1
    initial: 75
    unit_of_measurement: "%"
    icon: mdi:battery

input_boolean:
  test_fill_state:
    name: Test Fill State
    initial: false
    icon: mdi:toggle-switch

# Test sensors
template:
  - sensor:
    - name: "Test Level Sensor"
      state: "{{ states('input_number.test_level') }}"
      unit_of_measurement: "%"
      icon: mdi:water-percent

    - name: "Test Battery Sensor"
      state: "{{ states('input_number.test_battery') }}"
      unit_of_measurement: "%"
      icon: mdi:battery

# Enable configuration UI
config:

# Enable history
history:

# Enable recorder for state persistence
recorder:
  db_url: "sqlite:///:memory:"
  auto_purge: false

# Enable logger for debugging
logger:
  default: info
  logs:
    custom_components: debug
